@using Ecommerce3.Domain.Entities
@model Ecommerce3.Admin.ViewModels.Brand.EditBrandViewModel

<div class="content-section">
    <div class="d-flex justify-content-between align-items-center mb-2">
        <!-- Left side: Heading -->
        <h2 class="text-danger fw-bold fs-3 mb-0">Edit Brand - @Model.Name</h2>
    </div>

    <form method="post" asp-action="Edit">
        @Html.AntiForgeryToken()
        <!-- General -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0 text-muted py-2"><i class="fas fa-info"></i> General Info</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label fw-bold required" asp-for="Name"></label>
                            <input type="text" class="form-control" asp-for="Name">
                            <span asp-validation-for="Name" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label fw-bold required" asp-for="Slug"></label>
                            <input type="text" class="form-control" asp-for="Slug">
                            <span asp-validation-for="Slug" class="text-danger"></span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label fw-bold required" asp-for="Display">Display</label>
                            <input type="text" class="form-control" asp-for="Display">
                            <span asp-validation-for="Display" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label fw-bold required" asp-for="Breadcrumb"></label>
                            <input type="text" class="form-control" asp-for="Breadcrumb">
                            <span asp-validation-for="Breadcrumb" class="text-danger"></span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label fw-bold" asp-for="AnchorText"></label>
                            <input type="text" class="form-control" asp-for="AnchorText">
                            <span asp-validation-for="AnchorText" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label fw-bold" asp-for="AnchorTitle"></label>
                            <input type="text" class="form-control" asp-for="AnchorTitle">
                            <span asp-validation-for="AnchorTitle" class="text-danger"></span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label fw-bold required" asp-for="SortOrder"></label>
                            <input type="number" class="form-control" asp-for="SortOrder">
                            <span asp-validation-for="SortOrder" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label fw-bold required" asp-for="IsActive"></label>
                            <select class="form-select" asp-for="IsActive">
                                <option value="">Select</option>
                                <option value="true">Yes</option>
                                <option value="false">No</option>
                            </select>
                            <span asp-validation-for="IsActive" class="text-danger"></span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="mb-3">
                            <label class="form-label fw-bold required" asp-for="ShortDescription"></label>
                            <textarea class="form-control" rows="3" asp-for="ShortDescription"></textarea>
                            <span asp-validation-for="ShortDescription" class="text-danger"></span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="mb-3">
                            <label class="form-label fw-bold required" asp-for="FullDescription"></label>
                            <div id="longDescriptionEditor"
                                 style="height: 200px;">@Html.Raw(Model.FullDescription)</div>
                            <input type="hidden" id="longDescriptionInput" asp-for="FullDescription">
                            <span asp-validation-for="FullDescription" class="text-danger"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SEO -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0 text-muted py-2"><i class="fas fa-magnifying-glass"></i> SEO</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="mb-3">
                            <label class="form-label fw-bold" asp-for="H1"></label>
                            <input type="text" class="form-control" asp-for="H1">
                            <span asp-validation-for="H1" class="text-danger"></span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="mb-3">
                            <label class="form-label fw-bold" asp-for="MetaTitle"></label>
                            <input type="text" class="form-control" asp-for="MetaTitle">
                            <span asp-validation-for="MetaTitle" class="text-danger"></span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="mb-3">
                            <label class="form-label fw-bold" asp-for="MetaDescription"></label>
                            <textarea class="form-control" rows="5" asp-for="MetaDescription"></textarea>
                            <span asp-validation-for="MetaDescription" class="text-danger"></span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="mb-3">
                            <label class="form-label fw-bold" asp-for="MetaKeywords"></label>
                            <textarea class="form-control" rows="3"></textarea>
                            <span asp-validation-for="MetaKeywords" class="text-danger"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Images -->
        @await Component.InvokeAsync("Images",
            new { imageType = typeof(BrandImage), images = Model.Images, parentEntityId = Model.Id });

        <div class="row mb-7">
            <div class="col-xl-12">
                <button type="submit" class="btn btn-primary float-end">Update</button>
            </div>
        </div>
    </form>
</div>

@section StyleSheet
{
    <link href="~/css/quill.snow.css" rel="stylesheet">
}

@section Scripts
{
    <script src="~/js/brand.js"></script>
    <script src="~/js/quill.min.js"></script>
    <script>
        // Initialize Quill
        var quill = new Quill('#longDescriptionEditor', {
            theme: 'snow',
            modules: {
                toolbar: [
                    [{header: [1, 2, 3, false]}],
                    [{font: []}],                               // Font family
                    ['bold', 'italic', 'underline', 'strike'],    // Formatting
                    [{color: []}, {background: []}],          // Text/Background color
                    [{list: 'ordered'}, {list: 'bullet'}],    // Lists
                    [{align: []}],                              // Alignment
                    ['link', 'image', 'blockquote', 'code-block'], // Media / blocks
                    ['clean']                                     // Clear formatting
                ]
            }
        });

        // Sync Quill content to hidden input on change
        quill.on('text-change', function () {
            document.getElementById('longDescriptionInput').value = quill.root.innerHTML;
        });
    </script>
}