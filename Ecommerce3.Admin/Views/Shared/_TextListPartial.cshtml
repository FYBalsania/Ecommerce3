@using Ecommerce3.Domain.Enums
@model ValueTuple<string, int, string, Ecommerce3.Domain.Enums.TextListItemType, IReadOnlyList<Ecommerce3.Contracts.DTOs.TextListItem.TextListItemDTO>>

@{
    var textType = Model.Item4.ToString();
    var prefix = "text-" + textType;
    
    ViewData["TextPrefix"] = prefix;
    ViewData["TextTableId"] = $"{prefix}-List";
    
    var textAddModalId = $"{prefix}-AddModal";
    var textEditModalId = $"{prefix}-EditModal";
    var textDeleteModalId = $"{prefix}-DeleteModal";
}

<div class="card mb-4">
    <input type="hidden" id="@prefix-TextListItemType" value="@textType"/>
    <input type="hidden" class="textPrefix" value="@prefix" />
    <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0 text-muted py-2">
            @if (textType == nameof(TextListItemType.Disclaimer))
            {
                <i class="fas fa-align-justify"></i>
            }
            @if (textType == nameof(TextListItemType.Highlight))
            {
                <i class="fas fa-star"></i>
            }
            @textType
        </h5>

        <a href="javascript:;" class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#@textAddModalId">
            <i class="fas fa-plus"></i> Add @textType
        </a>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table align-middle">
                <thead>
                <tr>
                    <th>Text</th>
                    <th class="text-end" style="width: 10%;">Sort Order</th>
                    <th class="text-end" style="width: 15%;">Created</th>
                    <th class="text-center" style="width: 10%;">Action</th>
                </tr>
                </thead>
                <partial name="_TextListItemsPartial" model="Model.Item5"/>
            </table>
        </div>
    </div>
</div>
<div class="modal fade" id="@textAddModalId" tabindex="-1" aria-labelledby="@textAddModalId-Label" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="@textAddModalId-Label">Add @textType</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label required">Text</label>
                    <div id="@prefix-AddText" style="height: 100px;"></div>
                    <input type="hidden" id="@prefix-AddText-Input" />
                    <span class="text-danger" id="@prefix-AddTextError"></span>
                </div>
                <div class="mb-3">
                    <label class="form-label required">Sort Order</label>
                    <input type="number" class="form-control" id="@prefix-AddSortOrder"/>
                    <span class="text-danger" id="@prefix-AddSortOrderError"></span>
                </div>
            </div>
            <div class="modal-footer">
                <input type="hidden" id="@prefix-AddParentEntity" value="@Model.Item1" />
                <input type="hidden" id="@prefix-AddParentEntityId" value="@Model.Item2"/>
                <input type="hidden" id="@prefix-AddEntity" value="@Model.Item3"/>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="@prefix-Add-Save">Save</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="@textEditModalId" tabindex="-1" aria-labelledby="@textEditModalId-Label" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="@textEditModalId-Label">Edit @textType</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label required">Text</label>
                    <div id="@prefix-EditText" style="height: 100px;"></div>
                    <input type="hidden" id="@prefix-EditText-Input" />
                    <span class="text-danger" id="@prefix-EditTextError"></span>
                </div>
                <div class="mb-3">
                    <label class="form-label required">Sort Order</label>
                    <input type="number" class="form-control" id="@prefix-EditSortOrder"/>
                    <span class="text-danger" id="@prefix-EditSortOrderError"></span>
                </div>
            </div>
            <div class="modal-footer">
                <input type="hidden" id="@prefix-EditParentEntity" value="@Model.Item1" />
                <input type="hidden" id="@prefix-EditParentEntityId" value="@Model.Item2"/>
                <input type="hidden" id="@prefix-EditId"/>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="@prefix-Edit-Save">Update</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="@textDeleteModalId" tabindex="-1" aria-labelledby="@textDeleteModalId-Label" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="@textDeleteModalId-Label">Delete @textType</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Are you sure you want to delete <span class="text-danger" id="@prefix-DeleteText"></span>?
            </div>
            <div class="modal-footer">
                <input type="hidden" id="@prefix-DeleteParentEntity" value="@Model.Item1" />
                <input type="hidden" id="@prefix-DeleteParentEntityId" value="@Model.Item2"/>
                <input type="hidden" id="@prefix-DeleteId"/>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="@prefix-Delete">Delete</button>
            </div>
        </div>
    </div>
</div>