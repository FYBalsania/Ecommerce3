@using Ecommerce3.Domain.Enums
@model ValueTuple<string, int, string, Ecommerce3.Domain.Enums.TextListItemType, IReadOnlyList<Ecommerce3.Contracts.DTOs.TextListItem.TextListItemDTO>>

@{
    var type = Model.Item4.ToString();
    ViewData["TextListType"] = type;
    ViewData["TableId"] = $"textlist{type}";
    var addModalId = $"add{type}Modal";
    var editModalId = $"edit{type}Modal";
    var deleteModalId = $"delete{type}Modal";
}

<div class="card mb-4">
    <input type="hidden" id="@type-TextListItemType" value="@type"/>
    <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0 text-muted py-2">
            @if (type == nameof(TextListItemType.Disclaimer))
            {
                <i class="fas fa-align-justify"></i>
            }
            @if (type == nameof(TextListItemType.Highlight))
            {
                <i class="fas fa-star"></i>
            }
            @type
        </h5>

        <a href="javascript:;" class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#@addModalId">
            <i class="fas fa-plus"></i> Add @type
        </a>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table align-middle">
                <thead>
                <tr>
                    <th>Text</th>
                    <th class="text-end">Sort Order</th>
                    <th class="text-end">Created</th>
                    <th class="text-center">Action</th>
                </tr>
                </thead>
                <partial name="_TextListItemsPartial" model="Model.Item5"/>
            </table>
        </div>
    </div>
</div>
<div class="modal fade" id="@addModalId" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add @type</h5>
                <button class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label required">Text</label>
                    <textarea class="form-control" id="@type-AddText"></textarea>
                    <span class="text-danger" id="@type-AddTextError"></span>
                </div>
                <div class="mb-3">
                    <label class="form-label required">Sort Order</label>
                    <input type="number" class="form-control" id="@type-AddSortOrder"/>
                    <span class="text-danger" id="@type-AddSortOrderError"></span>
                </div>
            </div>
            <div class="modal-footer">
                <input type="hidden" id="@type-AddParentEntity" value="@Model.Item1" />
                <input type="hidden" id="@type-AddParentEntityId" value="@Model.Item2"/>
                <input type="hidden" id="@type-AddEntity" value="@Model.Item3"/>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="@type-Add-Save">Save</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="@editModalId" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit @type</h5>
                <button class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label required">Text</label>
                    <textarea class="form-control" id="@type-EditText"></textarea>
                    <span class="text-danger" id="@type-EditTextError"></span>
                </div>
                <div class="mb-3">
                    <label class="form-label required">Sort Order</label>
                    <input type="number" class="form-control" id="@type-EditSortOrder"/>
                    <span class="text-danger" id="@type-EditSortOrderError"></span>
                </div>
            </div>
            <div class="modal-footer">
                <input type="hidden" id="@type-EditParentEntity" value="@Model.Item1" />
                <input type="hidden" id="@type-EditParentEntityId" value="@Model.Item2"/>
                <input type="hidden" id="@type-EditId"/>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="@type-Edit-Save">Update</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="@deleteModalId" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Delete @type</h5>
                <button class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                Are you sure you want to delete <span class="text-danger" id="@type-DeleteText"></span>?
            </div>
            <div class="modal-footer">
                <input type="hidden" id="@type-DeleteParentEntity" value="@Model.Item1" />
                <input type="hidden" id="@type-DeleteParentEntityId" value="@Model.Item2"/>
                <input type="hidden" id="@type-DeleteId"/>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="@type-Delete">Delete</button>
            </div>
        </div>
    </div>
</div>
